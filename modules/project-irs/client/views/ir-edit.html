<form class="view-form" name="inspection">
	
	<div class="view-title-container flex-row">
		<h1><span ng-show="project.name">Edit Inspection &nbsp;&rsaquo;&nbsp; {{ir.name}} <span class="placeholder-value" ng-if="!ir.name">Untitled</span></h1>
		<div class="actions">
			<a class="btn btn-default btn-sm"
				ui-sref="p.ir.list"
				ng-click="cancel()">Cancel</a>
			<button class="btn btn-danger btn-sm"
	            ng-if="canDelete"
	            ng-click="delete()"><span class="glyphicon glyphicon-trash"></span><span>Delete</span></button>
			<button class="btn btn-primary btn-sm"
				ng-click="save()">Save</button>
			<button class="btn btn-default btn-sm" data-toggle="modal" data-target="#publishNotify"
				ng-if="canUnpublish"
				ng-click="unpublish()"><span class="glyphicon glyphicon-minus-sign"></span><span>Unpublish</span></button>
			<button class="btn btn-success btn-sm" data-toggle="modal" data-target="#publishNotify"
				ng-if="canPublish"
				ng-click="publish()"><span class="glyphicon glyphicon-share-alt"></span><span>Publish</span></button>
		</div>
	</div>

	<div class="view-body-container">
	
		<!-- INSPECTION DETAILS -->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h2>Inspection Details</h2>
			</div>
			<div class="panel-body">
				<div class="row">
					<div class="col-md-6 form-group">
						<label>Name</label>
						<input class="form-control" title="Name" id="name" name="inspectionreportname" ng-model="ir.name" required/>
					</div>
					<div class="col-md-6 form-group">
						<label>Date of Inspection</label>
						<div class="form-control date-picker"
							x-modal-date-picker 
							x-selected-date="ir.irDate" 
							ng-model="ir.irDate">
							{{ ir.irDate | amDateFormat:'MMMM Do, YYYY' }}
							<span class="glyphicon glyphicon-calendar"></span>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 form-group">
						<label class="control-label">Associated Content</label>
						<ul class="tag-list form-control" ng-if="ir.conditionArtifacts.length > 0">
							<li class="tag" ng-repeat="o in ir.conditionArtifacts">
								<span class="tag-name" ui-sref="p.artifact.view({artifactId:o._id})">{{o.name}}</span>
								<button class="btn" ng-click="removeConditionArtifact(o)"><span aria-hidden="true">×</span></button>
							</li>
						</ul>
						<button class="btn btn-default btn-sm anchor-list-btn"
							ng-if="project.userCan.createInspectionReport"
							ng-click="openAddTopic()" type="button" title="Link Project Conditions">+ Add Content
						</button>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12 form-group">
						<label class="control-label">Conditions</label>
						<ul class="tag-list form-control" ng-if="ir.conditions.length > 0">
							<li class="tag" ng-repeat="o in ir.conditions">
								<span class="tag-name" ui-sref="p.artifact.view({artifactId:o._id})">{{o.name}}</span>
								<button class="btn" ng-click="removeConditionArtifact(o)"><span aria-hidden="true">×</span></button>
							</li>
						</ul>
						<button class="btn btn-default btn-sm anchor-list-btn" ng-if="project.userCan.createInspectionReport" type="button" title="Link Project Conditions"
							x-vc-linker
							x-project="project"
							x-condition="condition"
							x-conditions="ir.conditions">+ Add Conditions</span>
						</button>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<label class="control-label">Inspection Record</label>
						<ul class="anchor-list">
							<li>
								<a ui-sref="p.artifact.edit({artifactId:ir.artifact._id})"
									ng-if="project.userCan.createInspectionReport">{{ir.artifact.name}}</a>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div><!--/INSPECTION DETAILS -->
	

		<div class="panel panel-default">
			<div class="panel-heading flex-row">
				<h2>Actions</h2>
				<div class="actions">
					<button class="btn btn-default btn-sm"
						ng-if="project.userCan.createInspectionReport"
						ng-click="openAddEnforcementAction()">
						<span class="glyphicon glyphicon-plus"></span><span>Add Action</span>
					</button>
				</div>
			</div>
			<ul class="list-group no-border">
				<li class="list-group-item" ng-if="ir.enforcementActions.length == 0">No Actions available</li>
				<li class="list-group-item" ng-repeat="o in ir.enforcementActions">{{o.name}}</li>
			</ul>
		</div>

		<div class="form-footer clearfix">
			<div class="pull-right">
				<a class="btn btn-default btn-sm"
					ui-sref="p.ir.list"
					ng-click="cancel()">Cancel</a>
				<button class="btn btn-danger btn-sm"
					ng-if="canDelete"
					ng-click="delete()"><span class="glyphicon glyphicon-trash"></span><span>Delete</span></button>
				<button class="btn btn-primary btn-sm"
					ng-click="save()">Save</button>
			</div>
		</div>

	</div>
</form>
