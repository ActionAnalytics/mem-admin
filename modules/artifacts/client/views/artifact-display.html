
<div ng-if="artifact.isTemplate">
	<!--

		This section gets displayed if the content is a template

	 -->
		<!-- When dealing specifically with valued components, we should show supporting documents -->
	<div ng-if="artifact.typeCode === 'valued-component'">
		<div x-content-document
			 ng-model="artifact.supportingDocuments"
			 title="'Supporting Documents'"
			 project="project"
			 editable="mode === 'edit'"></div>
	</div>
	<tmpl-template-render ng-if="artifact.isTemplate" x-template="artifact.template" x-mode="mode" x-project="project" x-document="artifact.templateData"></tmpl-template-render>
</div>

<!-- Displayed only for artifacts which are a collection of artifacts (VC's) -->
<div ng-if="artifact.isArtifactCollection" ng-init="editable=false">
	<div class="panel panel-default">
		<div class="panel-heading clearfix">
			<h2 class="pull-left">Valued Component Description</h2>
			<div class="pull-right"></div>
		</div>
		<div class="panel panel-default">
			<!-- These need to be built out as an array of VC's attached to this artifact -->
			<table ng-table="tableParams" show-filter="false" class="table table-hover table-striped">
				<tr ng-repeat="o in artifact.valuedComponents" ui-sref="p.artifact.view({artifactId:o.artifact})">
					<td data-title="'Name'"    filter="{'name':'text'}"     sortable="'name'"    >{{o.name}}</td>
					<td data-title="'Version'" filter="{'version':'text'}"   	class="text-center" sortable="'version'"  >{{o.version}}</td>
					<td data-title="'Stage'"   filter="{'stage':'text'}"    	class="text-center" sortable="'stage'"   >{{o.stage}}</td>
					<td data-title="'Published'" sortable="'isPublished'"><i ng-if="o.isPublished" class="glyphicon glyphicon-ok"></i></td>
					<td class="actions-col action-x1" header-class="'actions-col action-x1'">
						<a class="btn btn-link btn-sm"
						   title="Edit Valued Component"
						   ng-click="$event.stopPropagation()"
						   ui-sref="p.artifact.edit({artifactId:o.artifact})">
							<span class="glyphicon glyphicon-pencil"></span>
						</a>
					</td>
				</tr>
			</table>
	</div>
</div>

<div ng-if="!artifact.isTemplate && !artifact.isArtifactCollection" ng-init="editable=false">
	<!--

		This section gets displayed if the content is a document

	 -->
	<div class="row">

		<div class="col-sm-12">


			<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h2 class="pull-left">Main Artifact Document</h2>
					<div class="pull-right"></div>
				</div>
				<div class="panel-body">
					<div class="file-horiz">
						<span class="glyphicon glyphicon-list-alt"></span>
						<div ng-if="!artifact.document._id">
							<small>
								[ no document uploaded yet ] <br/> FOR <br/>
								{{ artifact.name }} ({{ artifact.version }} {{ artifact.stage }})<br/>
								<a href ng-if="mode === 'edit'" x-modal-document-link class="btn btn-xs btn-link" x-current="artifact.maindocument" x-project="project">
									+ Upload Document
								</a>
							</small>
						</div>
						<div class="panel panel-info"  ng-if="artifact.document._id">
							<a href="/api/document/{{ artifact.document._id }}/fetch" target="_blank">
								<small>
									{{ artifact.document.internalOriginalName }}<br/> AS <br/>
									{{ artifact.name }} ({{ artifact.version }} {{ artifact.stage }})<br/>
									<a href ng-if="mode === 'edit'" x-modal-document-link class="btn btn-xs btn-link" x-current="artifact.maindocument" x-project="project">
										+ Upload Document
									</a>
								</small>
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="col-sm-12">
			<div x-content-document ng-model="artifact.supportingDocuments" title="'Supporting Documents'" project="project" editable="mode === 'edit'"></div>
		</div>
	</div>
</div>
