<section class="document-browser-view">
	<div ng-table="docBrowser.phasesForProject">
		<div ng-repeat="phase in $data">
			<div class="panel panel-default accordion">
				<div class="panel-heading" role="tab" id="{{phase._id}}">
					<a class="clearfix"
					   role="button"
					   data-toggle="collapse"
					   href="#{{phase._id}}Collapse"
					   aria-expanded="true"
					   aria-controls="{{phase._id}}">
						<span class="glyphicon glyphicon-plus pull-left"></span>
						<span class="glyphicon glyphicon-minus pull-left"></span>
						<h2 class="pull-left">{{phase.name}}</h2>
					</a>
				</div>
				<!-- <div id="{{phase._id}}Collapse" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="{{phase._id}}Collapse">
					<div class="actions-table-container">
						<table ng-table="docBrowser.artifacts" class="table table-striped document-browser" show-filter="false">
							<tr ng-repeat="artifact in $data"
								ng-if="phase._id === artifact.phase"
								ui-sref="p.artifact.view({artifactId:artifact._id})">
								<td class="name-col" header-class="'name-col'" title="'Name'" filter="{ typeCode: 'text'}" sortable="'name'">
									{{artifact.document.internalOriginalName}}</td>
								<td title="'isPublished'" sortable="'status'">
									{{artifact.isPublished}}</td>
								<td title="'Last Modified'">
									{{artifact.dateUpdated | date : format : timezone}}</td>
								<td class="actions-col action-x1" header-class="'actions-col action-x1'">
									<a class="btn btn-link btn-sm" href="javascript:void();">
										<span class="glyphicon glyphicon-option-horizontal"></span>
									</a>
								</td>
							</tr>
						</table>
					</div>
				</div> -->
				<div id="{{phase._id}}Collapse" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="{{phase._id}}Collapse">
					<div class="actions-table-container">
						<table ng-table="docBrowser.artifacts" class="table table-striped document-browser" show-filter="false">
							<tr ng-repeat="artifact in $data"
								ng-if="phase._id === artifact.phase">
								<td class="name-col" header-class="'name-col'" title="'Name'" filter="{ depth: 'number'}" sortable="'name'">
									{{artifact.name}}</td>
								<td title="'isPublished'" sortable="'status'">
									{{artifact.isPublished}}</td>
								<td title="'Last Modified'">
									{{artifact.dateUpdated | date : format : timezone}}</td>
								<td class="actions-col action-x1" header-class="'actions-col action-x1'">
									<a ui-sref="p.artifact.view({artifactId:artifact._id})">
										<span class="glyphicon glyphicon-option-horizontal"></span>
									</a>
									<a
										ng-if="docBrowser.allowLink && artifact.supportingDocuments.length === 0"
										href
										ng-click="docBrowser.toggleDocumentLink( artifact.document )"
										title="Link">
											<span class="glyphicon glyphicon-link"></span>
									</a>

								</div>
							</tr>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- <div class="panel panel-default accordion">
			<div class="panel-heading" role="tab" id="phase1">
				<a class="clearfix" role="button" data-toggle="collapse" href="#phase1Collapse" aria-expanded="true" aria-controls="phase1Collapse">
					<span class="glyphicon glyphicon-plus pull-left"></span>
					<span class="glyphicon glyphicon-minus pull-left"></span>
					<h2 class="pull-left">{{phase.code}}</h2>
				</a>
			</div>
			<div id="phase1Collapse" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="ir1Collapse">
				<div class="actions-table-container">
					
					<table ng-table="docBrowser.artifacts" class="table table-striped document-browser" show-filter="false">
						<tr ng-repeat="artifact in $data" ui-sref="p.artifact.view({artifactId:artifact._id})">
							<td class="name-col" header-class="'name-col'" title="'Name'" filter="{ typeCode: 'text'}" sortable="'name'">
								{{artifact.name}}</td>
							<td title="'isPublished'" sortable="'status'">
								{{artifact.isPublished}}</td>
							<td title="'Last Modified'">
								{{artifact.dateUpdated | date : format : timezone}}</td>
							<td class="actions-col action-x1" header-class="'actions-col action-x1'">
								<a class="btn btn-link btn-sm" href="javascript:void();">
									<span class="glyphicon glyphicon-option-horizontal"></span>
								</a>
							</td>
						</tr>
					</table>
					
					<table class="table table-striped hidden">
						<thead>
							<tr>
								<th class="name-col">Name</th>
								<th class="status-col">Status</th>
								<th class="date-col">Last Modified</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-folder-close"></span>
									<span>Folder Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-folder-close"></span>
									<span>Folder Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-folder-close"></span>
									<span>Folder Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-file"></span>
									<span>File Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div> -->
		<!-- <div class="panel panel-default accordion">
			<div class="panel-heading" role="tab" id="phase2">
				<a class="clearfix" role="button" data-toggle="collapse" href="#phase2Collapse" aria-expanded="true" aria-controls="phase2Collapse">
					<span class="glyphicon glyphicon-plus pull-left"></span>
					<span class="glyphicon glyphicon-minus pull-left"></span>
					<h2 class="pull-left">{{phase.code}}</h2>
				</a>
			</div>
			<div id="phase2Collapse" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="ir2Collapse">
				<div class="actions-table-container">
					
					<table ng-table="docBrowser.artifacts" class="table table-striped document-browser" show-filter="false">
						<tr ng-repeat="artifact in $data" ui-sref="p.artifact.view({artifactId:artifact._id})">
							<td class="name-col" header-class="'name-col'" title="'Name'" filter="{ typeCode: 'text'}" sortable="'name'">
								{{artifact.name}}</td>
							<td title="'isPublished'" sortable="'status'">
								{{artifact.isPublished}}</td>
							<td title="'Last Modified'">
								{{artifact.dateUpdated | date : format : timezone}}</td>
							<td class="actions-col action-x1" header-class="'actions-col action-x1'">
								<a class="btn btn-link btn-sm" href="javascript:void();">
									<span class="glyphicon glyphicon-option-horizontal"></span>
								</a>
							</td>
						</tr>
					</table>
					
					<table class="table table-striped hidden">
						<thead>
							<tr>
								<th class="name-col">Name</th>
								<th class="status-col">Status</th>
								<th class="date-col">Last Modified</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-folder-close"></span>
									<span>Folder Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-folder-close"></span>
									<span>Folder Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-folder-close"></span>
									<span>Folder Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
							<tr>
								<td class="name-col">
									<span class="glyphicon glyphicon-file"></span>
									<span>File Name</span>
								</td>
								<td class="status-col"></td>
								<td class="date-col">mm/dd/yyyy</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
		</div> -->
		<!-- / PHASE DOCUMENTS -->

		<div class="panel panel-default hidden">
		<div class="panel-heading clearfix">
			<h2 class="pull-left">Documents</h2>
			<div class="panel-heading-actions pull-right">
				<a href class="btn-link"
					x-modal-document-upload-classify
					x-project="docBrowser.project"
					ng-if="(docBrowser.authentication.user) && environment === 'EAO'"><span class="glyphicon glyphicon-upload"></span>Upload</a>
				<a href class="btn-link"
					x-modal-document-upload-classify-mem
					x-project="docBrowser.project"
					ng-if="(docBrowser.authentication.user) && environment === 'MEM'"><span class="glyphicon glyphicon-upload"></span>Upload</a>	
			</div>
		</div>
		<div class="panel-body">
			<div class='col-sm-4 col-no-padding vertical-scroll col-border-right'>
				<ul class="small list-unstyled list-documents">
					<li
						ng-click="docBrowser.filterList(row)"
						ng-hide="row.label === 'Not Specified'"
						class="row-folder clickable row-folder-depth-{{ row.depth }}"
						ng-repeat="row in docBrowser.docTypes"
						ng-class="{'active btn-primary': docBrowser.filterDocsSelected(row)}">
						<span class="glyphicon glyphicon-play arrow"></span>
						{{ row.label }}
						
					<li>
					<li ng-repeat="doc in docBrowser.documentFiles | filter:filterLinage:true">{{ doc.internalOriginalName | removeExtension }}</li>
				</ul>
			</div>
			
			<div class='col-sm-4 col-no-padding vertical-scroll col-border-right'>
				<ul class="small list-unstyled list-documents list-indent-left">
					<li
						class="row-document clickable"
						ng-click="docBrowser.filterSummary(doc)"
						ng-repeat="doc in docBrowser.documentFiles | filter:filterLinage:true"
						ng-class="{'active btn-primary': filterSummary._id === doc._id}">
						<span class="glyphicon glyphicon-play arrow"></span>
						<span class="glyphicon glyphicon-file"></span>&nbsp;{{ doc.internalOriginalName | removeExtension }}
					</li>
				</ul>
			</div>
			
			<div class='col-sm-4 col-no-padding vertical-scroll' ng-class="{'bg-muted': !filterSummary}" >
				<div class="row" ng-show="filterSummary">
					<div class="col-sm-10 doc-detail-col">
						<ul class="small list-unstyled list-documents list-indent-left" >
							<li>
								<h3>
									{{ filterSummary.internalOriginalName | removeExtension }}
								</h3>
								<p>System File Title: {{ filterSummary.internalName }}</p>
								<p>Date Posted: {{ filterSummary.projectFolderDatePosted | date : format : timezone }}</p>
								<p>File Format: {{ filterSummary.internalMime }}</p>
								<p>File Size: {{ filterSummary.MBytes }} MB</p>
								<p>In Review?: {{ filterSummary.documentIsInReview?'Yes':'No' }}</p>
								<!-- NB: Project folders are authors in EPIC:  We override this behavior here -->
								<p>Author: {{ filterSummary.documentAuthor }}</p>
								<p>Current Revision: <a href="/api/document/{{ filterSummary._id }}/fetch"
														target="_blank">{{ filterSummary.documentVersion }} <span class="glyphicon glyphicon-download"></span></a></p>
								<p>Latest Revision: {{ filterSummary.documentIsLatestVersion?'Yes':'No' }} </p>
								<p ng-if="(docBrowser.authentication.user)">Delete Document: <a href ng-click="docBrowser.deleteDocument(filterSummary._id)"><span class="glyphicon glyphicon-remove"></span>
								</a>
							</li>
							<li>
								Revisions:
							</li>
							<li ng-repeat="docVersion in docBrowser.docVersions">
								<a href="{{ docVersion.documentFileURL }}">{{ docVersion.dateUpdated | date : format : timezone}}: {{ docVersion.documentVersion }} <span class="glyphicon glyphicon-download"></span></a>
							</li>
						</ul>
					</div>
					<div class="col-sm-2 doc-action-col">
						<a
							href="/api/document/{{ filterSummary._id }}/fetch"
							target="_blank" title="Download">
								<span class="glyphicon glyphicon-download"></span>
						</a>
						<a
							ng-if="docBrowser.allowLink"
							href
							ng-click="docBrowser.toggleDocumentLink( filterSummary )"
							title="Link">
								<span class="glyphicon glyphicon-link"></span>
						</a>

					</div>
				</div>

			</div>
		</div>
		
	</div>
</section>
