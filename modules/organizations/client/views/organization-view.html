
	<div class="view-title-container flex-row">
		<h1>Organizations <span ng-if="org.name">&nbsp;&rsaquo;&nbsp; {{ org.name }}</span></h1>
		<div class="actions">
			<a class="btn btn-sm btn-default" ui-sref="admin.organization.edit({orgId: org._id})"><span class="glyphicon glyphicon-pencil"></span><span>Edit</span></a>
		</div>
	</div>

	<div class="view-body-container">
		
		<div class="row hidden" ng-init="expandOrgView = true">
			<div class="col-sm-12 text-right">
				<a class="btn btn-xs btn-link" href ng-click="expandOrgView = !expandOrgView">
					<span ng-show="expandOrgView">Reduce Organization Detail</span>
					<span ng-show="!expandOrgView">Expand Organization Detail</span>
				</a>
				<a class="btn btn-xs btn-link" ui-sref="admin.organization.list">Cancel</a>
				<a class="btn btn-xs btn-link" ui-sref="admin.organization.edit({orgId: org._id})">Edit</a>
			</div>
		</div>
		
		<ul class="nav nav-tabs">
			<li role="presentation" class="active">
				<a href="#orgDetails" aria-controls="home" role="tab" data-toggle="tab">Organization Details</a>
			</li>
    		<li role="presentation">
				<a href="#orgUsers" aria-controls="profile" role="tab" data-toggle="tab">Contacts</a>
			</li>
			<li role="presentation">
				<a href="#orgProjects" aria-controls="profile" role="tab" data-toggle="tab">Projects</a>
			</li>
		</ul>

		<div class="tab-content">
			
			<!-- DETAILS TAB CONTENT -->
			<div class="tab-pane active" id="orgDetails" role="tabpanel">

				<fieldset>
					<legend>Organization Info</legend>
					<div class="row" >
						<div class="col-md-3">
							<div class="form-group">
								<label for="name" class="control-label">Organization Name</label>
								<p class="form-control-static">{{ org.name }}</p>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label for="company" class="control-label">Display Name<em>(Doing Business As)</em></label>
								<p class="form-control-static">{{ org.company }}</p>
							</div>
						</div>
						<div class="col-md-3">
							<div class="form-group">
								<label for="companyLegal" class="control-label">Company Legal</label>
								<p class="form-control-static">{{ org.companyLegal }}</p>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="form-group">
								<label for="companyType" class="control-label">Company Type</label>
								<p class="form-control-static">{{ org.companyType }}</p>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-sm-3">
							<div class="form-group">
								<label for="registeredIn" class="control-label">Registered In</label>
								<p class="form-control-static">{{ org.registeredIn }}</p>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="form-group">
								<label for="website" class="control-label">Website</label>
								<p class="form-control-static">{{ org.website }}</p>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="form-group">
								<label for="email" class="control-label">Email</label>
								<p class="form-control-static">{{ org.email }}</p>
							</div>
						</div>
					</div>

					<!-- Preferences -->
					<div class="form-group">
						<label class="control-label">Preferred Contact Method</label>
						<div class="checkbox-row">
							<div class="checkbox-inline">
								<label class="control-label" for="viaMail">
									<input type="checkbox" ng-model="org.viaMail" id="viaMail" name="viaMail" disabled/>By Mail</label>
							</div>
							<div class="checkbox-inline">
								<label class="control-label" for="viaEmail">
									<input type="checkbox" ng-model="org.viaEmail" id="viaEmail" name="viaEmail" disabled/>By Email</label>
							</div>
						</div>
					</div>

					<div ng-show="expandOrgView">
						<div class="row">
							<div class="col-sm-12 col-md-6">
								<div class="form-group">
									<label for="address1" class="control-label">Street Address 1</label>
									<p class="form-control-static">{{ org.address1 }}</p>
								</div>
							</div>    
							<div class="col-sm-12 col-md-6">
								<div class="form-group">
									<label for="address2" class="control-label">Street Address 2</label>
									<p class="form-control-static">{{ org.address2 }}</p>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-sm-3">
								<div class="form-group">
									<label for="city" class="control-label">City</label>
									<p class="form-control-static">{{ org.city }}</p>
								</div>
							</div>    
							<div class="col-sm-3">
								<div class="form-group">
									<label for="province" class="control-label">Province/State</label>
									<p class="form-control-static">{{ org.province }}</p>
								</div>
							</div>
							<div class="col-sm-3">
								<div class="form-group">
									<label for="country" class="control-label">Country</label>
									<p class="form-control-static">{{ org.country }}</p>
								</div>
							</div>
							<div class="col-sm-3">
								<div class="form-group">
									<label for="postal" class="control-label">Postal/Zip Code</label>
									<p class="form-control-static">{{ org.postal }}</p>
								</div>
							</div>
						</div>
					</div>

				</fieldset>

				<fieldset>
					<legend>Primary Contact</legend>
					<div class="row">
						<div class="col-sm-3">
							<div class="form-group">
								<label class="control-label">Name</label>
								<p class="form-control-static">{{ org.primaryContact.displayName }}</p>
							</div>
						</div>
						<div class="col-sm-3">
							<div class="form-group">
								<label class="control-label">Email</label>
								<p class="form-control-static">{{ org.primaryContact.email }}</p>
							</div>
						</div>
					</div>
				</fieldset>
			</div><!-- / DETAILS TAB CONTENT -->
			
			<!-- USERS TAB CONTENT -->
			<div class="tab-pane" id="orgUsers" role="tabpanel">
				<div class="button-bar clearfix">
					<a class="btn btn-default btn-sm pull-left" ui-sref="admin.organization.user.create({orgId: org._id})">
						<span class="glyphicon glyphicon-plus"></span><span>Add Contact</span>
					</a>
					<div class="pull-right">
						<show-filter x-toggle-filter="toggleFilter"></show-filter>
					</div>
				</div>
				<div class="panel panel-default">
					<table ng-table="tableParams" x-show-filter="toggleFilter" class="table table-striped table-hover">
						<tr ng-repeat="o in $data" class='clickable' ui-sref="admin.organization.user.detail({orgId: org._id, userId: o._id})">
							<td data-title="'Name'" filter="{'displayName':'text'}" sortable="'displayName'">{{o.displayName}}</td>
							<td data-title="'Username'" filter="{'username':'text'}" sortable="'username'">{{o.username}}</td>
							<td data-title="'Email'" filter="{'email':'text'}" sortable="'email'" >{{o.email}}</td>
							<td class="actions-col action-x2" header-class="'actions-col action-x2'">
								<a  class="btn btn-default btn-sm" ng-click="$event.stopPropagation()" ui-sref="admin.organization.user.edit({orgId: org._id, userId: o._id})">
									<span class="glyphicon glyphicon-pencil"></span>
								</a>
								<a class="btn btn-default btn-sm" title="Remove User from Organization" ng-click="$event.stopPropagation();removeUserFromOrg(o._id)">
									<span class="glyphicon glyphicon-trash"></span>
								</a>
							</td>
						</tr>
						<tr class="no-records" ng-show="!$data || !$data.length" class="text-center">
							<td colspan="2">No records found.</td>
						</tr>
					</table>
				</div>
			</div><!-- / USERS TAB CONTENT -->

			<!-- Projects TAB CONTENT -->
			<div class="tab-pane" id="orgProjects" role="tabpanel">
				<div class="button-bar clearfix">
					<!-- a class="btn btn-default btn-sm pull-left" ui-sref="admin.organization.user.create({orgId: org._id})">
						<span class="glyphicon glyphicon-plus"></span><span>Add Contact</span>
					</a -->
					<div class="pull-right">
						<show-filter x-toggle-filter="toggleFilter"></show-filter>
					</div>
				</div>
				<div class="panel panel-default">
					<table ng-table="projectTableParams" x-show-filter="toggleFilter" class="table table-striped table-hover">
						<tr ng-repeat="o in $data" class='clickable' ui-sref="p.detail({projectid: o.code})">
							<td header-class="'name-col'"
								data-title="'Name'"
								filter="{'name':'text'}"
								sortable="'name'"><a ui-sref="p.detail({projectid: o.code})">{{o.name}}</a></td>
							<td ng-if="environment === 'MEM'" data-title="'Permit'" filter="{'memPermitID':'text'}" sortable="'memPermitID'">
								{{o.memPermitID}}
							</td>
							<td header-class="'type-col'"
								data-title="'Type'"
								sortable="'type'">{{o.type}}</td>
							<td header-class="'region-col'"
								data-title="'Region'"
								sortable="'region'">{{o.region | regionName}}</td>
							<td header-class="'phase-col'"
								data-title="'Phase'"
								sortable="'currentPhase.name'">{{o.currentPhase.name}}</td>
							<td class="actions-col action-x2" header-class="'actions-col action-x2'">
								<a class="btn btn-default btn-sm" title="Remove Project from Organization" ng-click="$event.stopPropagation();removeProjectFromOrg(o.code)">
									<span class="glyphicon glyphicon-trash"></span>
								</a>
							</td>
						</tr>
						<tr class="no-records" ng-show="!$data || !$data.length" class="text-center">
							<td colspan="2">No records found.</td>
						</tr>
					</table>
				</div>
			</div>
		</div>

	</div><!-- / VIEW BODY CONTAINER -->